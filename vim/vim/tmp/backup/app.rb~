require 'rack'
require 'net'

class App

  def call(env)
    request = Rack::Request.new(env)
    require 'pry'; binding.pry
    if env['REQUEST_PATH'] == "/registration" && request.post?
      ['200', {'Content-Type' => 'text/html'}, ["#{request.params}"]]
    else
      ['200', {'Content-Type' => 'text/html'}, ["#{env['QUERY_STRING']}"]]
    end
  end

  def answer
    uri = URI("http://pushkin-contest.ror.by/quiz")
    parameters = {
      answer: 'ваш ответ',
      token: 'USER_TOKEN (см. процесс регистрации)',
      task_id:  'id задачи (передано ранее)'
    }
    Net::HTTP.post_form(uri, parameters)
  end
end
